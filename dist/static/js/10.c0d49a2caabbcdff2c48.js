webpackJsonp([10],{"1ICo":function(t,e){},MxSc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("d7EF"),n=i.n(a),r=i("//Fk"),s=i.n(r),l={props:{title:{default:"",type:String},icon:{default:"",type:String}},data:function(){return{errors:[],region:{id:null,title_ar:null,title_en:null,country_id:""},edit:!1,dialog:!1,deleteDialog:!1,forceDelete:!1,selectedItem:null,requests:[],totalRequests:0,pagination:{},page:1,search:"",loading:!1,disapprove:!1,approve:!1,headers:[{text:"الاسم عربى",align:"right",value:"userName",sortable:!1},{text:"الاسم انجليزى",align:"right",value:"userName",sortable:!1},{text:"المنطقة",align:"right",value:"country",sortable:!1},{text:"عمليات",align:"cneter",value:"actions",sortable:!1}],editedItem:null,alert:{message:"",type:"success"},index:null,filterCountry:null,searchCountries:[],addEditCountries:[]}},computed:{formTitle:function(){return this.edit?"تعديل منطقة":"إضافة منطقة"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},watch:{dialog:function(t){t||(this.country={id:null,title_ar:null,title_en:null,code:null}),t||this.close()},page:function(t){this.pagination.page=t,this.fetch()},filterCountry:function(t){var e=this;this.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total})}},created:function(){var t=this;this.loading||(this.fetchCountries(),this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}))},methods:{fetch:function(){var t=this;this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),this.loading},getDataFromApi:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loading=!0,new s.a(function(i,a){var n=t.pagination,r=(n.sortBy,n.descending,n.page);n.rowsPerPage;if(null!=e){var s=e.data.data,l=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,setTimeout(function(){t.loading=!1},300),i({items:s,total:l})}else{var o=null==t.filterCountry?"":"&country_id="+t.filterCountry,c=t.search.replace(/\s/g,"").length>0?"admin/region?title="+t.search+o:"admin/region?page="+r+o;t.$http.get(c).then(function(e){var a=e.data.data,n=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,setTimeout(function(){t.loading=!1},300),i({items:a,total:n})})}})},fetchCountries:function(){var t=this;this.$http.get("admin/country").then(function(e){t.searchCountries=e.data.data,t.addEditCountries=e.data.data})},deleteItem:function(t){var e=this;this.deleting=!0;this.requests.indexOf(t);confirm("هل تريد مسح المنطقة")?this.$http.delete("admin/region/"+t.id).then(function(t){e.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total}),e.alert.message="تم مسح المنطقة!",e.alert.type="success",e.deleting=!1}):this.deleting=!1},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=-1},300)},editing:function(t){this.errors=[],this.dialog=!this.dialog,this.edit=!0,this.region.id=t.id,this.region.title_ar=t.title_ar,this.region.title_en=t.title_en,this.region.country_id=t.country_id,this.index=this.requests.indexOf(t)},save:function(){var t=this,e=this.index,i=new FormData,a={};this.region.title_ar&&i.append("title_ar",this.region.title_ar),a.title_ar=this.region.title_ar,this.region.title_en&&i.append("title_en",this.region.title_en),a.title_en=this.region.title_en,this.region.country_id&&i.append("country_id",this.region.country_id),a.country_id=this.region.country_id,this.edit?this.$http.put("admin/region/"+this.region.id,a).then(function(i){t.$set(t.requests,e,a),t.alert.type="warning",t.alert.message="تم تعديل المنطقة!",t.close(),t.errors=[],t.region={id:null,title_ar:null,title_en:null,country_id:null}}).catch(function(e){var i=e.response;t.errors=i.data.error}):this.$http.post("admin/region?page="+this.page,i).then(function(e){t.requests.push(e.data),t.alert.type="info",t.alert.message="تم اضافة المنطقة!",t.close(),t.errors=[],t.region={id:null,title_ar:null,title_en:null,country_id:null},t.getDataFromApi()}).catch(function(e){var i=e.response;t.errors=i.data.error})},parseDate:function(t){if(!t)return null;var e=t.split("/"),i=n()(e,3),a=i[0],r=i[1];return i[2]+"-"+a.padStart(2,"0")+"-"+r.padStart(2,"0")}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"elevation-2"},[i("vuetify-alert",{attrs:{message:t.alert.message},on:{message:function(e){t.alert.message=""}}}),t._v(" "),i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",{},[i("v-icon",{attrs:{medium:""}},[t._v(t._s(t.icon))]),t._v(" "+t._s(t.title))],1),t._v(" "),i("v-spacer"),t._v(" "),i("v-select",{staticStyle:{"max-width":"200px",height:"42px","font-size":"11px"},attrs:{flat:"",dense:"",items:[{title_ar:"الدول",id:null}].concat(t.searchCountries),"item-text":"title_ar","item-value":"id",label:"الدول"},model:{value:t.filterCountry,callback:function(e){t.filterCountry=e},expression:"filterCountry"}}),t._v(" "),i("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-tooltip",{attrs:{slot:"activator",top:""},slot:"activator"},[i("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",fab:"",dark:"",small:""},on:{click:function(e){t.edit=!1,t.errors=[],t.region={}}},slot:"activator"},[i("v-icon",[t._v("add")])],1),t._v(" "),i("span",[t._v("إضافة منطقة جديد")])],1),t._v(" "),i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),i("v-card-text",[i("v-list",[t._l(t.errors,function(e){return[i("v-list-tile",{key:e[0]+Math.random()},[i("v-list-tile-content",[i("v-list-tile-title",{staticClass:"text-xs-center"},t._l(e,function(e){return i("span",{key:e+Math.random(),staticClass:"red--text"},[t._v("\n                            "+t._s(e)+" "),i("v-icon",{attrs:{color:"red"}},[t._v("error")])],1)}))],1)],1)]})],2)],1),t._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",[i("v-text-field",{attrs:{label:" اسم المنطقة بالعربية"},model:{value:t.region.title_ar,callback:function(e){t.$set(t.region,"title_ar",e)},expression:"region.title_ar"}}),t._v(" "),i("v-text-field",{attrs:{label:"اسم المنطقة بالانجليزية"},model:{value:t.region.title_en,callback:function(e){t.$set(t.region,"title_en",e)},expression:"region.title_en"}}),t._v(" "),i("v-select",{attrs:{flat:"",dense:"",items:[{title_ar:"الدول",id:null}].concat(t.addEditCountries),"item-text":"title_ar","item-value":"id",label:"الدولة"},model:{value:t.region.country_id,callback:function(e){t.$set(t.region,"country_id",e)},expression:"region.country_id"}})],1)],1)],1)],1),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{staticClass:"ma-2",attrs:{color:"",small:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("الغاء")]),t._v(" "),i("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:"",small:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("حفظ")])],1)],1)],1)],1),t._v(" "),i("v-data-table",{attrs:{headers:t.headers,items:t.requests,"total-items":t.totalRequests,loading:t.loading,search:t.search,"hide-actions":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[e.item.title_ar?i("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.title_ar))]):i("td",{staticClass:"text-xs-right"},[t._v("لم يحدد")]),t._v(" "),e.item.title_en?i("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.title_en))]):i("td",{staticClass:"text-xs-right"},[t._v("لم يحدد")]),t._v(" "),e.item.country?i("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.country.title_ar))]):i("td",{staticClass:"text-xs-right"},[t._v("لم يحدد")]),t._v(" "),i("td",{staticClass:"justify-right layout px-0"},[i("v-tooltip",{attrs:{top:""}},[i("v-btn",{attrs:{slot:"activator",icon:"",small:"",flat:"",color:"blue"},on:{click:function(i){t.editing(e.item)}},slot:"activator"},[i("v-icon",{staticClass:"mr-2 blue--text"},[t._v("\n                      edit\n                  ")])],1),t._v(" "),i("span",[t._v("تعديل المنطقة")])],1),t._v(" "),i("v-tooltip",{attrs:{top:""}},[i("v-btn",{attrs:{slot:"activator",loading:t.disapprove,icon:"",small:"",flat:"",color:"red"},on:{click:function(i){t.deleteItem(e.item)}},slot:"activator"},[i("v-icon",{staticClass:"red--text"},[t._v("\n                      delete\n                  ")])],1),t._v(" "),i("span",[t._v("مسح المنطقة")])],1)],1)]}},{key:"pageText",fn:function(e){return[t._v("\n          الصفحات "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" من "+t._s(e.itemsLength)+"\n        ")]}}])},[i("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('\n            لا يوجد نتائج للبحث "'+t._s(t.search)+'"\n        ')]),t._v(" "),i("template",{slot:"no-data"},[i("v-alert",{attrs:{value:!0,color:"success",icon:"warning",outline:""}},[t._v("\n            لا يوجد نتائج للبحث\n          ")])],1)],2),t._v(" "),i("div",{staticClass:"text-xs-center pt-2"},[i("v-pagination",{attrs:{"total-visible":"6",color:"primary",length:t.pages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),i("v-dialog",{attrs:{"max-width":"290"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[i("v-card",[i("v-card-title",{staticClass:"title red--text"},[t._v("هل تريد تعطيل المنطقة؟")]),t._v(" "),i("v-card-text",[i("v-checkbox",{attrs:{color:"red",label:"حذف المنطقة نهائيا"},model:{value:t.forceDelete,callback:function(e){t.forceDelete=e},expression:"forceDelete"}})],1),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{color:"grey darken-1",flat:"flat"},on:{click:function(e){t.dialog=!1}}},[t._v("\n            لا\n          ")]),t._v(" "),i("v-btn",{attrs:{color:"red darken-1",flat:"flat"},on:{click:t.deleteItem}},[t._v("\n            نعم\n          ")])],1)],1)],1)],1)},staticRenderFns:[]};var c={components:{RegionsTable:i("VU/8")(l,o,!1,function(t){i("1ICo")},"data-v-12b93415",null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",[e("regions-table",{attrs:{title:"المناطق",icon:"my_location"}})],1)},staticRenderFns:[]};var d=i("VU/8")(c,u,!1,function(t){i("v931")},null,null);e.default=d.exports},v931:function(t,e){}});