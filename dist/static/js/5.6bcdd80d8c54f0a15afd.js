webpackJsonp([5],{PZIO:function(t,e){},gOmi:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("d7EF"),n=a.n(i),s=a("//Fk"),r=a.n(s),o={props:{title:{default:"",type:String},icon:{default:"",type:String}},data:function(){return{errors:[],newCategory:{id:null,title_ar:null,title_en:null},edit:!1,dialog:!1,optionsDialog:!1,imagesdialog:!1,menu1:!1,dateFormatted:null,date:null,requests:[],media:[],totalRequests:0,pagination:{},search:"",loading:!1,deleteLoading:!1,headers:[{text:"الإسم العربي",align:"center",value:"userName",sortable:!1},{text:"الإسم الإنجليزي",align:"center",sortable:!1},{text:"صورة",align:"center",value:"country",sortable:!1},{text:"عمليات",align:"center",value:"actions",sortable:!1}],editedItem:null,alert:{message:"",type:"success"},page:1,filterCategory:null,categories:[],approve:!1}},computed:{formTitle:function(){return this.edit?"تعديل قسم":"إضافة قسم"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},watch:{dialog:function(t){t||(this.newCategory={id:null,title_ar:null,title_en:null}),t||this.close()},page:function(t){this.pagination.page=t,this.fetch()}},created:function(){var t=this;this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})},methods:{makeSearch:function(){this.search=event.target.value,this.fetch()},fetch:function(){var t=this;this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),this.loading},fetchCategories:function(){var t=this;this.$http.get("api/admin/categories/main/get/all").then(function(e){t.categories=e.data.data})},getDataFromApi:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loading=!0,new r.a(function(a,i){var n=t.pagination,s=(n.sortBy,n.descending,n.page);n.rowsPerPage;if(null!=e){var r=e.data.data,o=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,t.loading=!1,a({items:r,total:o})}else{var l=(t.search.replace(/\s/g,"").length,"admin/ads-category?page="+s);t.$http.get(l).then(function(e){var i=e.data.data,n=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,t.loading=!1,a({items:i,total:n})})}})},selectImage:function(){document.getElementById("image_choose").click()},deleteItem:function(t){var e=this;this.deleteLoading=!0;var a=this.requests.indexOf(t);confirm("هل انت متأكد من مسح القسم")?this.$http.delete("admin/ads-category/"+t.id+"?page="+this.page).then(function(t){e.getDataFromApi(),e.requests.splice(a,1),e.alert.message="تم مسح القسم!",e.alert.type="info",e.deleteLoading=!1}):this.deleteLoading=!1},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=-1},300)},editing:function(t){this.errors=[],this.dialog=!this.dialog,this.edit=!0,this.newCategory.id=t.id,this.newCategory.title_ar=t.title_ar,this.newCategory.title_en=t.title_en},save:function(){var t=this,e=this.$refs.image_input.files[0];void 0===e&&(e=null);var a=new FormData;e&&a.append("image",e),this.newCategory.title_ar&&a.append("title_ar",this.newCategory.title_ar),this.newCategory.title_en&&a.append("title_en",this.newCategory.title_en),this.edit?this.$http.post("admin/ads-category/"+this.newCategory.id,a).then(function(e){t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.type="warning",t.alert.message="تم تعديل القسم!",t.close(),t.errors=[],t.newCategory={id:null,title_ar:null,title_en:null},t.$refs.image_input.value=""}).catch(function(e){var a=e.response;t.errors=a.data.error}):this.$http.post("admin/ads-category?page="+this.page,a).then(function(e){t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.type="info",t.alert.message="تم اضافة القسم!",t.close(),t.errors=[],t.newCategory={id:null,title_ar:null,title_en:null}}).catch(function(e){var a=e.response;t.errors=a.data.error})},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=n()(e,3),i=a[0],s=a[1];return a[2]+"-"+i.padStart(2,"0")+"-"+s.padStart(2,"0")}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-2"},[a("vuetify-alert",{attrs:{message:t.alert.message},on:{message:function(e){t.alert.message=""}}}),t._v(" "),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",{},[a("v-icon",{attrs:{medium:""}},[t._v(t._s(t.icon))]),t._v(" "+t._s(t.title))],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-tooltip",{attrs:{slot:"activator",top:""},slot:"activator"},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",fab:"",small:"",dark:""},on:{click:function(e){t.edit=!1,t.errors=[]}},slot:"activator"},[a("v-icon",[t._v("add")])],1),t._v(" "),a("span",[t._v("تصنيف جديد")])],1),t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),a("v-card-text",[a("v-list",[t._l(t.errors,function(e){return[a("v-list-tile",{key:e[0]+Math.random()},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"text-xs-center"},t._l(e,function(e){return a("span",{key:e+Math.random(),staticClass:"red--text"},[t._v("\n                              "+t._s(e)+" "),a("v-icon",{attrs:{color:"red"}},[t._v("error")])],1)}))],1)],1)]})],2)],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",[a("v-text-field",{attrs:{label:" اسم التصنيف بالعربية"},model:{value:t.newCategory.title_ar,callback:function(e){t.$set(t.newCategory,"title_ar",e)},expression:"newCategory.title_ar"}}),t._v(" "),a("v-text-field",{attrs:{label:"اسم التصنيف بالانجليزية"},model:{value:t.newCategory.title_en,callback:function(e){t.$set(t.newCategory,"title_en",e)},expression:"newCategory.title_en"}}),t._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.$refs.image_input.click()}}},[a("v-icon",[t._v("image")]),t._v("\n                                صورة\n                              ")],1),t._v(" "),a("input",{ref:"image_input",staticStyle:{display:"none"},attrs:{type:"file"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"ma-2",attrs:{color:"",small:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("الغاء")]),t._v(" "),a("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:"",small:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("حفظ")])],1)],1)],1)],1),t._v(" "),a("v-data-table",{attrs:{headers:t.headers,items:t.requests,"total-items":t.totalRequests,loading:t.loading,search:t.search,"hide-actions":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[e.item.title_ar?a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.title_ar))]):a("td",{staticClass:"text-xs-center"},[t._v("لا يوجد مسمى")]),t._v(" "),e.item.title_en?a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.title_en))]):a("td",{staticClass:"text-xs-center"},[t._v("لا يوجد مسمى")]),t._v(" "),a("td",{staticClass:"text-xs-center"},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:"http://afr7na.com/public"+e.item.image,alt:"ايقونة ",title:"صورة ",width:"50px",height:"50px"}})]),t._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",loading:t.approve,flat:"",color:"blue"},on:{click:function(a){t.editing(e.item)}},slot:"activator"},[a("v-icon",{staticClass:"mr-2 blue--text"},[t._v("\n                      edit\n                  ")])],1),t._v(" "),a("span",[t._v("تعديل التصنيف")])],1),t._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",loading:t.deleteLoading,icon:"",flat:"",color:"red"},on:{click:function(a){t.deleteItem(e.item)}},slot:"activator"},[a("v-icon",{staticClass:"red--text"},[t._v("\n                          delete\n                      ")])],1),t._v(" "),a("span",[t._v("مسح التصنيف")])],1)]}},{key:"pageText",fn:function(e){return[t._v("\n          الصفحات "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" من "+t._s(e.itemsLength)+"\n        ")]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('\n            لا يوجد نتائج للبحث "'+t._s(t.search)+'"\n        ')]),t._v(" "),a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:!0,color:"success",icon:"warning",outline:""}},[t._v("\n            لا يوجد نتائج\n          ")])],1)],2),t._v(" "),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{"total-visible":"6",color:"primary",length:t.pages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)},staticRenderFns:[]};var c={components:{AdsCategoriesTable:a("VU/8")(o,l,!1,function(t){a("PZIO")},"data-v-64c78a68",null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",[e("ads-categories-table",{attrs:{title:"الأقسام",icon:"devices_other"}})],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("ooXM")},null,null);e.default=u.exports},ooXM:function(t,e){}});