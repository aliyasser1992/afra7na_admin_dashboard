webpackJsonp([2],{"27a7":function(t,e){},RnZP:function(t,e){},bTtV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("d7EF"),s=a.n(i),n=a("//Fk"),o=a.n(n),l=this,r={props:{title:{default:"",type:String},icon:{default:"",type:String}},data:function(){return{imageBaseUrl:l.$imageBaseUrl,errors:[],askToDeleteDialog:!1,specialEventTimesDialog:!1,forceDelete:!1,edit:!1,dialog:!1,optionsDialog:!1,imagesdialog:!1,menu1:!1,dateFormatted:null,date:null,requests:[],media:[],totalRequests:0,pagination:{},search:"",loading:!1,disapprove:!1,approve:!1,ad_dialog:!1,ad_form:{ad_image:null,ad_image_sort:0,ads_link:null},special_event_dialog:!1,event:{id:0,special:"",from:"",to:""},headers:[{text:"العنوان",align:"center",value:"title",sortable:!1},{text:"صورة",align:"center",sortable:!1},{text:"المستخدم",align:"center",value:"user",sortable:!1},{text:"الهاتف",align:"center",value:"phone",sortable:!1},{text:"الدولة",align:"center",value:"country",sortable:!1},{text:"المنطقة",align:"center",value:"region",sortable:!1},{text:"التمييز",align:"center",value:"region",sortable:!1},{text:"من",align:"center",value:"region",sortable:!1},{text:"الى",align:"center",value:"region",sortable:!1},{text:"تمميز",align:"center",value:"region",sortable:!1},{text:"عمليات",align:"center",value:"actions",sortable:!1}],editedItem:null,alert:{message:"",type:"success"},page:1,filterCountry:null,specialEvent:!1,specialEventTimes:[],loadingDeleteTime:!1,countries:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},watch:{dialog:function(t){t||(this.newCategory={id:null,title_ar:null,title_en:null,category:{id:null,title:null},rel_category:{id:null,title:null}}),t||this.close()},page:function(t){this.pagination.page=t,this.fetch()},filterCountry:function(t){var e=this;this.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total})},specialEvent:function(t){var e=this;this.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total})}},created:function(){var t=this;this.fetchCountries(),this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})},methods:{fetchCountries:function(){var t=this;this.$http.get("admin/country").then(function(e){t.countries=e.data.data})},makeSearch:function(){this.search=event.target.value,this.fetch()},fetch:function(){var t=this;this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),this.loading},getDataFromApi:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loading=!0,new o.a(function(a,i){var s=t.pagination,n=(s.sortBy,s.descending,s.page);s.rowsPerPage;if(null!=e){var o=e.data.data,l=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,t.loading=!1,a({items:o,total:l})}else{var r=""==t.search?"":"&title="+t.search,c=0==t.specialEvent?"":"&special_for_admin",v="admin/event?category=1"+(null==t.filterCountry?"":"&country_id="+t.filterCountry)+r+"&page="+n+c;t.$http.get(v).then(function(e){var i=e.data.data,s=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,t.loading=!1,a({items:i,total:s})})}})},selectImage:function(){document.getElementById("image_choose").click()},deleteItem:function(){var t=this,e=this.selectedItem;this.disapprove=!0;var a=1==this.forceDelete?"admin/event-destroy/"+e.id:"admin/event-trached/"+e.id;this.$http.delete(a).then(function(e){t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.message=1==t.forceDelete?"تم حذف الفرح!":"تم إيقاف الفرح!ّ",t.alert.type="info",t.askToDeleteDialog=!1,t.forceDelete=!1,t.disapprove=!1})},restoreItem:function(t){var e=this;if(this.approve=!0,confirm("هل تود استرجاع الفرح")){this.forceDelete;this.$http.delete("admin/event-restore/"+t.id).then(function(t){e.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total}),e.alert.message="تم استئناف المستخدم",e.alert.type="success",e.approve=!1})}else this.approve=!1},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=-1},300)},editing:function(t){this.dialog=!this.dialog,this.edit=!0,this.newCategory.id=t.id,this.newCategory.title_ar=t.title_ar,this.newCategory.title_en=t.title_en,this.newCategory.category.id=t.sub_category.category.category_id,this.newCategory.category.title=t.sub_category.category.title_ar,this.newCategory.rel_category.id=t.sub_category.category.category_id,this.newCategory.rel_category.title=t.sub_category.title_ar},remove_ad_event:function(){var t=this;this.$http.put("admin/remove_ad_event/"+this.ad_form.id).then(function(e){t.ad_dialog=!1,t.alert.message="العمليه تمت بنجاح",t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})}).catch(function(e){var a=e.response;t.errors=a.data.errors})},add_ad:function(t){this.ad_dialog=!0,this.ad_form.id=t.id,this.ad_form.ad_image=t.ad_image,this.ad_form.ad_image_sort=t.ad_image_sort,this.ad_form.ads_link=t.ads_link},addAdToEvent:function(){var t=this,e=new FormData;e.append("_method","put");var a=this.$refs.image_input.files[0];void 0===a&&(a=null),a&&e.append("ad_image",a),this.ad_form.ad_image_sort&&e.append("ad_image_sort",this.ad_form.ad_image_sort),this.ad_form.ads_link&&e.append("ads_link",this.ad_form.ads_link),this.$http.post("admin/event_add_image/"+this.ad_form.id,e).then(function(e){t.ad_dialog=!1,t.alert.message="العمليه تمت بنجاح",t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total,t.errors=[]})}).catch(function(e){var a=e.response;t.errors=a.data.errors})},event_special:function(t){this.special_event_dialog=!0,this.event.id=t.id,this.event.special=1===t.special,this.event.from=null===t.from?(new Date).toISOString().substr(0,10):new Date(t.from).toISOString().substr(0,10),this.event.to=null===t.to?(new Date).toISOString().substr(0,10):new Date(t.to).toISOString().substr(0,10)},addEditSpecail:function(){var t=this;this.event.special||(this.event.from="",this.event.to=""),this.$http.put("admin/special-event/"+this.event.id,this.event).then(function(e){t.special_event_dialog=!1,1===e.data.data?t.alert.message="تم تمييز الحدث":t.alert.message="تم الغاء تمييز الحدث",t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})}).catch(function(e){var a=e.response;t.errors=a.data.errors})},save:function(){var t=this,e=this.$refs.image_input.files[0];void 0===e&&(e=null);var a=new FormData;e&&a.append("image",e),this.newCategory.title_ar&&a.append("title_ar",this.newCategory.title_ar),this.newCategory.title_en&&a.append("title_en",this.newCategory.title_en),this.newCategory.category.id&&a.append("category_id",this.newCategory.category.id),this.newCategory.rel_category.id&&a.append("rel_category_id",this.newCategory.rel_category.id),this.edit?this.$http.post("api/admin/categories/update/category/"+this.newCategory.id+"?page="+this.page,a).then(function(e){t.getDataFromApi(e).then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.type="warning",t.alert.message="تم تعديل القسم!",t.close(),t.errors=[],t.newCategory={id:null,title_ar:null,title_en:null,category:{id:null,title:null},rel_category:{id:null,title:null}},t.$refs.image_input.value=""}).catch(function(e){var a=e.response;t.errors=a.data.errors}):this.$http.post("api/admin/categories/add/category?page="+this.page,a).then(function(e){t.getDataFromApi(e).then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.type="info",t.alert.message="تم اضافة القسم!",t.close(),t.errors=[],t.newCategory={id:null,title_ar:null,title_en:null,category:{id:null,title:null},rel_category:{id:null,title:null}},t.$refs.image_input.value=""}).catch(function(e){var a=e.response;t.errors=a.data.errors})},showSpecialEventTimes:function(t){var e=this;this.specialEventTimesDialog=!this.specialEventTimesDialog,this.$http.get("admin/special-events/"+t.id).then(function(t){e.specialEventTimes=t.data})},deleteEventTime:function(t){var e=this;this.loadingDeleteTime=!0,this.$http.delete("admin/special-events/"+t.id).then(function(a){e.specialEventTimes.splice(t,1),e.loadingDeleteTime=!1},function(t){alert("حدث خطأ غير متوقع . يرجى المحاولة مرة اخري"),e.loadingDeleteTime=!1})},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=s()(e,3),i=a[0],n=a[1];return a[2]+"-"+i.padStart(2,"0")+"-"+n.padStart(2,"0")}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-2"},[a("vuetify-alert",{attrs:{message:t.alert.message},on:{message:function(e){t.alert.message=""}}}),t._v(" "),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",{},[a("v-icon",{attrs:{medium:""}},[t._v(t._s(t.icon))]),t._v("\n      "+t._s(t.title)+"\n    ")],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-checkbox",{staticClass:"mt-4",attrs:{label:"متميز"},model:{value:t.specialEvent,callback:function(e){t.specialEvent=e},expression:"specialEvent"}}),t._v(" "),a("v-text-field",{staticStyle:{"max-width":"200px",height:"42px","font-size":"11px"},attrs:{"append-icon":"search",label:"بحث","single-line":"","hide-details":""},nativeOn:{keyup:function(e){t.makeSearch(e)}}}),t._v(" "),a("v-select",{staticStyle:{"max-width":"200px",height:"42px","font-size":"11px"},attrs:{flat:"",dense:"",items:[{title_ar:"الدول",id:null}].concat(t.countries),"item-text":"title_ar","item-value":"id"},model:{value:t.filterCountry,callback:function(e){t.filterCountry=e},expression:"filterCountry"}}),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.ad_dialog,callback:function(e){t.ad_dialog=e},expression:"ad_dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("اضافة اعلان للحدث")])]),t._v(" "),a("v-card-text",[a("ul",t._l(t.errors,function(e){return a("li",{key:e[0]+Math.random(),staticClass:"red--text"},[a("ul",t._l(e,function(e){return a("li",{key:e+Math.random()},[t._v("\n                  "+t._s(e)+"\n                ")])}))])}))]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",[a("v-text-field",{attrs:{label:"رابط الاعلان"},model:{value:t.ad_form.ads_link,callback:function(e){t.$set(t.ad_form,"ads_link",e)},expression:"ad_form.ads_link"}}),t._v(" "),a("br"),t._v(" "),a("v-text-field",{attrs:{label:"ترتيب ظهور الاعلان بالرقم"},model:{value:t.ad_form.ad_image_sort,callback:function(e){t.$set(t.ad_form,"ad_image_sort",e)},expression:"ad_form.ad_image_sort"}}),t._v(" "),a("br"),t._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.$refs.image_input.click()}}},[a("v-icon",[t._v("image")]),t._v("صورة\n                ")],1),t._v(" "),a("input",{ref:"image_input",staticStyle:{display:"none"},attrs:{name:"images",type:"file",multiple:""}}),t._v(" "),a("br"),t._v(" "),null!==t.ad_form.ad_image?a("div",[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:"http://afr7na.com/public"+t.ad_form.ad_image,alt:"صوره الاعلان",title:"صورة الاعلان",width:"50px",height:"50px"}}),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.remove_ad_event(e)}}},[t._v("الغاء الاعلان للحدث")])],1):t._e()],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("الغاء")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.addAdToEvent(e)}}},[t._v("حفظ")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.special_event_dialog,callback:function(e){t.special_event_dialog=e},expression:"special_event_dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("تمييز حدث")])]),t._v(" "),a("v-card-text",[a("ul",t._l(t.errors,function(e){return a("li",{key:e[0]+Math.random(),staticClass:"red--text"},[a("ul",t._l(e,function(e){return a("li",{key:e+Math.random()},[t._v("\n                  "+t._s(e)+"\n                ")])}))])}))]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",[a("v-checkbox",{staticClass:"mx-2",attrs:{label:"تمييز الحدث"},model:{value:t.event.special,callback:function(e){t.$set(t.event,"special",e)},expression:"event.special"}}),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.event.special,expression:"event.special"}],attrs:{justify:"center"}},[a("label",[t._v("من تاريخ")]),t._v(" "),a("br"),t._v(" "),a("v-date-picker",{model:{value:t.event.from,callback:function(e){t.$set(t.event,"from",e)},expression:"event.from"}})],1),t._v(" "),a("br"),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.event.special,expression:"event.special"}],attrs:{justify:"center"}},[a("label",[t._v("الى تاريخ")]),t._v(" "),a("br"),t._v(" "),a("v-date-picker",{model:{value:t.event.to,callback:function(e){t.$set(t.event,"to",e)},expression:"event.to"}})],1),t._v(" "),a("br")],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("الغاء")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.addEditSpecail(e)}}},[t._v("حفظ")])],1)],1)],1)],1),t._v(" "),a("v-data-table",{attrs:{headers:t.headers,items:t.requests,"total-items":t.totalRequests,loading:t.loading,search:t.search,"hide-actions":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[e.item.title?a("td",{staticClass:"text-xs-center"},[t._v("\n        "+t._s(e.item.title)+"\n      ")]):a("td",{staticClass:"text-xs-center"},[t._v("لا يوجد مسمى")]),t._v(" "),a("td",{staticClass:"text-xs-center"},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:"https://afr7na.com/public"+e.item.special_image,alt:"ايقونة ",title:"صورة ",width:"50px",height:"50px"}})]),t._v(" "),e.item.user_id?a("td",{staticClass:"text-xs-center"},[t._v("\n        "+t._s(e.item.user.name)+"\n      ")]):a("td",{staticClass:"text-xs-center"},[t._v("لا يوجد مسمى")]),t._v(" "),e.item.phone?a("td",{staticClass:"text-xs-center"},[t._v("\n        "+t._s(e.item.phone)+"\n      ")]):a("td",{staticClass:"text-xs-center"},[t._v("لا يوجد مسمى")]),t._v(" "),e.item.country.title_ar?a("td",{staticClass:"text-xs-center"},[t._v("\n        "+t._s(e.item.country.title_ar)+"\n      ")]):t._e(),t._v(" "),e.item.region.title_ar?a("td",{staticClass:"text-xs-center"},[t._v("\n        "+t._s(e.item.region.title_ar)+"\n      ")]):a("td",{staticClass:"text-xs-center"},[t._v("لا يوجد مسمى")]),t._v(" "),e.item.special?a("td",{staticClass:"text-xs-right"},[t._v("اعلان مميز")]):a("td",{staticClass:"text-xs-right"},[t._v("اعلان غير مميز")]),t._v(" "),e.item.from?a("td",{staticClass:"text-xs-right"},[t._v("\n        "+t._s(e.item.from)+"\n      ")]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد تاريخ")]),t._v(" "),e.item.to?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.to))]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد تاريخ")]),t._v(" "),a("td",{staticClass:"text-xs-right"},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",flat:"",color:"red"},on:{click:function(a){t.event_special(e.item)}},slot:"activator"},[e.item.special?a("v-icon",{staticClass:"mr-2 blue--text"},[t._v("check")]):a("v-icon",{staticClass:"mr-2 blue--text"},[t._v("stop")])],1),t._v(" "),a("span",[t._v("التمييز /الغاء التمييز")])],1)],1),t._v(" "),a("td",{},[!0===t.specialEvent?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",small:"",flat:"",color:"blue"},on:{click:function(a){t.showSpecialEventTimes(e.item)}},slot:"activator"},[a("v-icon",{staticClass:"mr-2 blue--text"},[t._v("access_time")])],1),t._v(" "),a("span",[t._v("عرض الأوقات")])],1):t._e(),t._v(" "),null==e.item.deleted_at?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",loading:t.disapprove,icon:"",small:"",flat:"",color:"red"},on:{click:function(a){t.selectedItem=e.item,t.askToDeleteDialog=!t.askToDeleteDialog}},slot:"activator"},[a("v-icon",{staticClass:"red--text"},[t._v("delete")])],1),t._v(" "),a("span",[t._v("تعطيل")])],1):a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",loading:t.approve,icon:"",small:"",flat:"",color:"green"},on:{click:function(a){t.restoreItem(e.item)}},slot:"activator"},[a("v-icon",{staticClass:"green--text"},[t._v("restore")])],1),t._v(" "),a("span",[t._v("تنشيط")])],1)],1)]}},{key:"pageText",fn:function(e){return[t._v("الصفحات "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" من\n      "+t._s(e.itemsLength))]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('لا يوجد نتائج للبحث "'+t._s(t.search)+'"')]),t._v(" "),a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:!0,color:"success",icon:"warning",outline:""}},[t._v("لا يوجد أحداث بهذا القسم")])],1)],2),t._v(" "),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{"total-visible":"6",color:"primary",length:t.pages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.askToDeleteDialog,callback:function(e){t.askToDeleteDialog=e},expression:"askToDeleteDialog"}},[a("v-card",[a("v-card-title",{staticClass:"title red--text"},[t._v("متأكد من إيقاف الفرح")]),t._v(" "),a("v-card-text",[a("v-checkbox",{attrs:{color:"red",label:"حذف الفرح نهائيا"},model:{value:t.forceDelete,callback:function(e){t.forceDelete=e},expression:"forceDelete"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"grey darken-1",flat:"flat"},on:{click:function(e){t.askToDeleteDialog=!1}}},[t._v("لا")]),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",flat:"flat"},on:{click:t.deleteItem}},[t._v("نعم")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.specialEventTimesDialog,callback:function(e){t.specialEventTimesDialog=e},expression:"specialEventTimesDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("الأوقات")])]),t._v(" "),a("v-card-text",[a("ul",t._l(t.errors,function(e){return a("li",{key:e[0]+Math.random(),staticClass:"red--text"},[a("ul",t._l(e,function(e){return a("li",{key:e+Math.random()},[t._v("\n                "+t._s(e)+"\n              ")])}))])}))]),t._v(" "),a("v-card-text",{staticClass:"py-0"},[a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.specialEventTimes,function(e){return a("v-flex",t._b({key:e.id},"v-flex",((i={}).xs12=!0,i),!1),[a("v-card",[a("v-container",{attrs:{"fill-height":"",fluid:"","pa-2":""}},[a("v-layout",{attrs:{"fill-height":""}},[a("v-flex",{staticClass:"text-xs-center",attrs:{xs5:"","align-end":"",flexbox:""}},[a("span",{staticClass:"primary--text"},[t._v(t._s(t.moment(e.start_date).calendar()))])]),t._v(" "),a("v-flex",{staticClass:"text-xs-center",attrs:{xs2:""}},[a("v-icon",[t._v("keyboard_backspace")])],1),t._v(" "),a("v-flex",{staticClass:"text-xs-center",attrs:{xs5:"","align-end":"",flexbox:""}},[a("span",{staticClass:"primary--text"},[t._v(t._s(t.moment(e.end_date).calendar()))])])],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",loading:t.loadingDeleteTime,icon:"",small:"",flat:"",color:"red"},on:{click:function(a){t.deleteEventTime(e)}},slot:"activator"},[a("v-icon",{staticClass:"red--text"},[t._v("delete")])],1),t._v(" "),a("span",[t._v("مسح هذا الوقت")])],1)],1)],1)],1);var i}))],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("الغاء")])],1)],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(r,c,!1,function(t){a("RnZP")},"data-v-80489d22",null).exports,d={props:{title:{default:"",type:String},icon:{default:"",type:String}},data:function(){return{errors:[],askToDeleteDialog:!1,forceDelete:!1,edit:!1,dialog:!1,optionsDialog:!1,imagesdialog:!1,menu1:!1,dateFormatted:null,date:null,requests:[],media:[],totalRequests:0,pagination:{},search:"",loading:!1,disapprove:!1,approve:!1,special_event_dialog:!1,event:{id:0,special:"",from:"",to:""},headers:[{text:"العنوان",align:"center",value:"title",sortable:!1},{text:"صورة",align:"center",sortable:!1},{text:"المستخدم",align:"center",value:"user",sortable:!1},{text:"الهاتف",align:"center",value:"phone",sortable:!1},{text:"الدولة",align:"center",value:"country",sortable:!1},{text:"المنطقة",align:"center",value:"region",sortable:!1},{text:"التمييز",align:"center",value:"region",sortable:!1},{text:"من",align:"center",value:"region",sortable:!1},{text:"الى",align:"center",value:"region",sortable:!1},{text:"تمميز",align:"center",value:"region",sortable:!1},{text:"عمليات",align:"center",value:"actions",sortable:!1}],editedItem:null,alert:{message:"",type:"success"},page:1,filterCountry:null,specialEvent:!1,categories:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},watch:{dialog:function(t){t||(this.newCategory={id:null,title_ar:null,title_en:null,category:{id:null,title:null},rel_category:{id:null,title:null}}),t||this.close()},page:function(t){this.pagination.page=t,this.fetch()},filterCountry:function(t){var e=this;this.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total})},specialEvent:function(t){var e=this;this.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total})}},created:function(){var t=this;this.fetchCountries(),this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})},methods:{fetchCountries:function(){var t=this;this.$http.get("admin/country").then(function(e){t.categories=e.data.data})},makeSearch:function(){this.search=event.target.value,this.fetch()},getDataFromApi:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loading=!0,new o.a(function(a,i){var s=t.pagination,n=(s.sortBy,s.descending,s.page);s.rowsPerPage;if(null!=e){var o=e.data.data,l=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,t.loading=!1,a({items:o,total:l})}else{var r=""==t.search?"":"&title="+t.search,c=0==t.specialEvent?"":"&special_for_admin",v="admin/event?category=2"+(null==t.filterCountry?"":"&country_id="+t.filterCountry)+r+"&page="+n+c;t.$http.get(v).then(function(e){var i=e.data.data,s=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,t.loading=!1,a({items:i,total:s})})}})},fetch:function(){var t=this;this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),this.loading},selectImage:function(){document.getElementById("image_choose").click()},deleteItem:function(){var t=this,e=this.selectedItem;this.disapprove=!0;var a=1==this.forceDelete?"admin/event-destroy/"+e.id:"admin/event-trached/"+e.id;this.$http.delete(a).then(function(e){t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.message=1==t.forceDelete?"تم حذف المناسبة!":"تم إيقاف المناسبة!ّ",t.alert.type="info",t.askToDeleteDialog=!1,t.forceDelete=!1,t.disapprove=!1})},restoreItem:function(t){var e=this;if(this.approve=!0,confirm("هل تود استرجاع المناسبة")){this.forceDelete;this.$http.delete("admin/event-restore/"+t.id).then(function(t){e.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total}),e.alert.message="تم استئناف المناسبة",e.alert.type="success",e.approve=!1})}else this.approve=!1},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=-1},300)},editing:function(t){this.dialog=!this.dialog,this.edit=!0,this.newCategory.id=t.id,this.newCategory.title_ar=t.title_ar,this.newCategory.title_en=t.title_en,this.newCategory.category.id=t.sub_category.category.category_id,this.newCategory.category.title=t.sub_category.category.title_ar,this.newCategory.rel_category.id=t.sub_category.category.category_id,this.newCategory.rel_category.title=t.sub_category.title_ar},event_special:function(t){this.special_event_dialog=!0,this.event.id=t.id,this.event.special=1===t.special,this.event.from=null===t.from?(new Date).toISOString().substr(0,10):new Date(t.from).toISOString().substr(0,10),this.event.to=null===t.to?(new Date).toISOString().substr(0,10):new Date(t.to).toISOString().substr(0,10)},addEditSpecail:function(){var t=this;this.event.special||(this.event.from="",this.event.to=""),this.$http.put("admin/special-event/"+this.event.id,this.event).then(function(e){t.special_event_dialog=!1,1===e.data.data?t.alert.message="تم تمييز الحدث":t.alert.message="تم الغاء تمييز الحدث",t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})}).catch(function(e){var a=e.response;t.errors=a.data.errors})},save:function(){var t=this,e=this.$refs.image_input.files[0];void 0===e&&(e=null);var a=new FormData;e&&a.append("image",e),this.newCategory.title_ar&&a.append("title_ar",this.newCategory.title_ar),this.newCategory.title_en&&a.append("title_en",this.newCategory.title_en),this.newCategory.category.id&&a.append("category_id",this.newCategory.category.id),this.newCategory.rel_category.id&&a.append("rel_category_id",this.newCategory.rel_category.id),this.edit?this.$http.post("api/admin/categories/update/category/"+this.newCategory.id+"?page="+this.page,a).then(function(e){t.getDataFromApi(e).then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.type="warning",t.alert.message="تم تعديل القسم!",t.close(),t.errors=[],t.newCategory={id:null,title_ar:null,title_en:null,category:{id:null,title:null},rel_category:{id:null,title:null}},t.$refs.image_input.value=""}).catch(function(e){var a=e.response;t.errors=a.data.errors}):this.$http.post("api/admin/categories/add/category?page="+this.page,a).then(function(e){t.getDataFromApi(e).then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.type="info",t.alert.message="تم اضافة القسم!",t.close(),t.errors=[],t.newCategory={id:null,title_ar:null,title_en:null,category:{id:null,title:null},rel_category:{id:null,title:null}},t.$refs.image_input.value=""}).catch(function(e){var a=e.response;t.errors=a.data.errors})},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=s()(e,3),i=a[0],n=a[1];return a[2]+"-"+i.padStart(2,"0")+"-"+n.padStart(2,"0")}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-2"},[a("vuetify-alert",{attrs:{message:t.alert.message},on:{message:function(e){t.alert.message=""}}}),t._v(" "),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",{},[a("v-icon",{attrs:{medium:""}},[t._v(t._s(t.icon))]),t._v("\n      "+t._s(t.title)+"\n    ")],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-checkbox",{staticClass:"mt-4",attrs:{label:"متميز"},model:{value:t.specialEvent,callback:function(e){t.specialEvent=e},expression:"specialEvent"}}),t._v(" "),a("v-text-field",{staticStyle:{"max-width":"200px",height:"42px","font-size":"11px"},attrs:{"append-icon":"search",label:"بحث","single-line":"","hide-details":""},nativeOn:{keyup:function(e){t.makeSearch(e)}}}),t._v(" "),a("v-select",{staticStyle:{"max-width":"200px",height:"42px","font-size":"11px"},attrs:{flat:"",dense:"",items:[{title_ar:"الدول",id:null}].concat(t.categories),"item-text":"title_ar","item-value":"id"},model:{value:t.filterCountry,callback:function(e){t.filterCountry=e},expression:"filterCountry"}}),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.special_event_dialog,callback:function(e){t.special_event_dialog=e},expression:"special_event_dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("تمييز حدث")])]),t._v(" "),a("v-card-text",[a("ul",t._l(t.errors,function(e){return a("li",{key:e[0]+Math.random(),staticClass:"red--text"},[a("ul",t._l(e,function(e){return a("li",{key:e+Math.random()},[t._v(t._s(e))])}))])}))]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",[a("v-checkbox",{staticClass:"mx-2",attrs:{label:"تمييز الحدث"},model:{value:t.event.special,callback:function(e){t.$set(t.event,"special",e)},expression:"event.special"}}),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.event.special,expression:"event.special"}],attrs:{justify:"center"}},[a("label",[t._v("من تاريخ")]),t._v(" "),a("br"),t._v(" "),a("v-date-picker",{model:{value:t.event.from,callback:function(e){t.$set(t.event,"from",e)},expression:"event.from"}})],1),t._v(" "),a("br"),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.event.special,expression:"event.special"}],attrs:{justify:"center"}},[a("label",[t._v("الى تاريخ")]),t._v(" "),a("br"),t._v(" "),a("v-date-picker",{model:{value:t.event.to,callback:function(e){t.$set(t.event,"to",e)},expression:"event.to"}})],1),t._v(" "),a("br")],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("الغاء")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.addEditSpecail(e)}}},[t._v("حفظ")])],1)],1)],1)],1),t._v(" "),a("v-data-table",{attrs:{headers:t.headers,items:t.requests,"total-items":t.totalRequests,loading:t.loading,search:t.search,"hide-actions":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[e.item.title?a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.title))]):a("td",{staticClass:"text-xs-center"},[t._v("لا يوجد مسمى")]),t._v(" "),a("td",{staticClass:"text-xs-center"},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:"https://afr7na.com/public"+e.item.special_image,alt:"ايقونة ",title:"صورة ",width:"50px",height:"50px"}})]),t._v(" "),e.item.user_id?a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.user.name))]):a("td",{staticClass:"text-xs-center"},[t._v("لا يوجد مسمى")]),t._v(" "),e.item.phone?a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.phone))]):a("td",{staticClass:"text-xs-center"},[t._v("لا يوجد مسمى")]),t._v(" "),e.item.country.title_ar?a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.country.title_ar))]):t._e(),t._v(" "),e.item.region.title_ar?a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.region.title_ar))]):a("td",{staticClass:"text-xs-center"},[t._v("لا يوجد مسمى")]),t._v(" "),e.item.special?a("td",{staticClass:"text-xs-right"},[t._v("اعلان مميز")]):a("td",{staticClass:"text-xs-right"},[t._v("اعلان غير مميز")]),t._v(" "),e.item.from?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.from))]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد تاريخ")]),t._v(" "),e.item.to?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.to))]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد تاريخ")]),t._v(" "),a("td",{staticClass:"text-xs-right"},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",flat:"",color:"red"},on:{click:function(a){t.event_special(e.item)}},slot:"activator"},[e.item.special?a("v-icon",{staticClass:"mr-2 blue--text"},[t._v("check")]):a("v-icon",{staticClass:"mr-2 blue--text"},[t._v("stop")])],1),t._v(" "),a("span",[t._v("التمييز /الغاء التمييز")])],1)],1),t._v(" "),a("td",{staticClass:"justify-center layout px-0"},[null==e.item.deleted_at?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",loading:t.disapprove,icon:"",small:"",flat:"",color:"red"},on:{click:function(a){t.selectedItem=e.item,t.askToDeleteDialog=!t.askToDeleteDialog}},slot:"activator"},[a("v-icon",{staticClass:"red--text"},[t._v("delete")])],1),t._v(" "),a("span",[t._v("تعطيل")])],1):a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",loading:t.approve,icon:"",small:"",flat:"",color:"green"},on:{click:function(a){t.restoreItem(e.item)}},slot:"activator"},[a("v-icon",{staticClass:"green--text"},[t._v("restore")])],1),t._v(" "),a("span",[t._v("تنشيط")])],1)],1)]}},{key:"pageText",fn:function(e){return[t._v("الصفحات "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" من "+t._s(e.itemsLength))]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('لا يوجد نتائج للبحث "'+t._s(t.search)+'"')]),t._v(" "),a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:!0,color:"success",icon:"warning",outline:""}},[t._v("لا توجد مناسبات")])],1)],2),t._v(" "),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{"total-visible":"6",color:"primary",length:t.pages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.askToDeleteDialog,callback:function(e){t.askToDeleteDialog=e},expression:"askToDeleteDialog"}},[a("v-card",[a("v-card-title",{staticClass:"title red--text"},[t._v("متأكد من إيقاف المناسبة")]),t._v(" "),a("v-card-text",[a("v-checkbox",{attrs:{color:"red",label:"حذف المناسبة نهائيا"},model:{value:t.forceDelete,callback:function(e){t.forceDelete=e},expression:"forceDelete"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"grey darken-1",flat:"flat"},on:{click:function(e){t.askToDeleteDialog=!1}}},[t._v("لا")]),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",flat:"flat"},on:{click:t.deleteItem}},[t._v("نعم")])],1)],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(d,u,!1,function(t){a("jxFa")},"data-v-74047824",null).exports,p={props:{title:{default:"",type:String},icon:{default:"",type:String}},data:function(){return{errors:[],askToDeleteDialog:!1,forceDelete:!1,edit:!1,dialog:!1,sendNotiDialog:!1,notiControl:{laoding:!1,sendNotiDialog:!1,countries:[],regions:[],eventId:null,selectedCountry:null,selectedRegion:null,showRegionSelectBox:!0,allCountry:!1},optionsDialog:!1,imagesdialog:!1,menu1:!1,dateFormatted:null,date:null,requests:[],media:[],totalRequests:0,pagination:{},search:"",loading:!1,disapprove:!1,approve:!1,special_event_dialog:!1,event:{id:0,special:"",from:"",to:""},headers:[{text:"العنوان",align:"right",value:"title",sortable:!1},{text:"صورة",align:"right",sortable:!1},{text:"المستخدم",align:"right",value:"user",sortable:!1},{text:"الهاتف",align:"right",value:"phone",sortable:!1},{text:"الدولة",align:"right",value:"country",sortable:!1},{text:"المنطقة",align:"right",value:"region",sortable:!1},{text:"وقت بداية الدعوة",align:"right",value:"invitationStartTime",sortable:!1},{text:"التمييز",align:"center",value:"region",sortable:!1},{text:"من",align:"center",value:"region",sortable:!1},{text:"الى",align:"center",value:"region",sortable:!1},{text:"تمميز",align:"center",value:"region",sortable:!1},{text:"عمليات",align:"center",value:"actions",sortable:!1}],editedItem:null,alert:{message:"",type:"success"},page:1,filterCountry:null,specialEvent:!1,countries:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},watch:{page:function(t){this.pagination.page=t,this.fetch()},filterCountry:function(t){var e=this;this.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total})},specialEvent:function(t){var e=this;this.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total})}},created:function(){var t=this;this.fetchCountries(),this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})},methods:{fetchCountries:function(){var t=this;this.$http.get("admin/country").then(function(e){t.notiControl.countries=e.data.data,t.countries=e.data.data})},makeSearch:function(){this.search=event.target.value,this.fetch()},getDataFromApi:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loading=!0,new o.a(function(a,i){var s=t.pagination,n=(s.sortBy,s.descending,s.page);s.rowsPerPage;if(null!=e){var o=e.data.data,l=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,t.loading=!1,a({items:o,total:l})}else{var r=""==t.search?"":"&title="+t.search,c=0==t.specialEvent?"":"&special_for_admin",v="admin/event?category=3"+(null==t.filterCountry?"":"&country_id="+t.filterCountry)+r+"&page="+n+c;t.$http.get(v).then(function(e){var i=e.data.data,s=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,t.loading=!1,a({items:i,total:s})})}})},fetch:function(){var t=this;this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),this.loading},selectImage:function(){document.getElementById("image_choose").click()},deleteItem:function(){var t=this,e=this.selectedItem;this.disapprove=!0;var a=1==this.forceDelete?"admin/event-destroy/"+e.id:"admin/event-trached/"+e.id;this.$http.delete(a).then(function(e){t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.message=1==t.forceDelete?"تم حذف المناسبة!":"تم إيقاف المناسبة!ّ",t.alert.type="info",t.askToDeleteDialog=!1,t.forceDelete=!1,t.disapprove=!1})},restoreItem:function(t){var e=this;if(this.approve=!0,confirm("هل تود استرجاع المناسبة")){this.forceDelete;this.$http.delete("admin/event-restore/"+t.id).then(function(t){e.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total}),e.alert.message="تم استئناف المناسبة",e.alert.type="success",e.approve=!1})}else this.approve=!1},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=-1},300)},editing:function(t){this.dialog=!this.dialog,this.edit=!0,this.newCategory.id=t.id,this.newCategory.title_ar=t.title_ar,this.newCategory.title_en=t.title_en,this.newCategory.category.id=t.sub_category.category.category_id,this.newCategory.category.title=t.sub_category.category.title_ar,this.newCategory.rel_category.id=t.sub_category.category.category_id,this.newCategory.rel_category.title=t.sub_category.title_ar},prepareSendingNoti:function(t){this.notiControl.sendNotiDialog=!this.notiControl.sendNotiDialog,this.edit=!0,this.notiControl.eventId=t.id},sendNotifications:function(t){var e=this,a=new FormData;null!=this.notiControl.selectedCountry&&a.append("country",this.notiControl.selectedCountry),null!=this.notiControl.selectedRegion&&a.append("region",this.notiControl.selectedRegion),this.notiControl.loading=!0,this.$http.post("admin/send-notification/"+t.eventId,a).then(function(t){e.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total}),e.alert.message="تم ارسال الإشعارت",e.alert.type="success",e.notiControl.loading=!1}).catch(function(t){var a=t.response;e.errors=a.data.error})},selectedCountryChanged:function(t){var e=this;this.$http.get("admin/region?country_id="+t).then(function(t){e.notiControl.regions=t.data.data})},allcountryChanged:function(t){!0===t?(this.notiControl.showRegionSelectBox=!1,this.notiControl.selectedRegion=null):(this.notiControl.showRegionSelectBox=!0,this.notiControl.selectedRegion=null)},event_special:function(t){this.special_event_dialog=!0,this.event.id=t.id,this.event.special=1===t.special,this.event.from=null===t.from?(new Date).toISOString().substr(0,10):new Date(t.from).toISOString().substr(0,10),this.event.to=null===t.to?(new Date).toISOString().substr(0,10):new Date(t.to).toISOString().substr(0,10)},addEditSpecail:function(){var t=this;this.event.special||(this.event.from="",this.event.to=""),this.$http.put("admin/special-event/"+this.event.id,this.event).then(function(e){t.special_event_dialog=!1,1===e.data.data?t.alert.message="تم تمييز الحدث":t.alert.message="تم الغاء تمييز الحدث",t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})}).catch(function(e){var a=e.response;t.errors=a.data.errors})},save:function(){var t=this,e=this.$refs.image_input.files[0];void 0===e&&(e=null);var a=new FormData;e&&a.append("image",e),this.newCategory.title_ar&&a.append("title_ar",this.newCategory.title_ar),this.newCategory.title_en&&a.append("title_en",this.newCategory.title_en),this.newCategory.category.id&&a.append("category_id",this.newCategory.category.id),this.newCategory.rel_category.id&&a.append("rel_category_id",this.newCategory.rel_category.id),this.edit?this.$http.post("api/admin/categories/update/category/"+this.newCategory.id+"?page="+this.page,a).then(function(e){t.getDataFromApi(e).then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.type="warning",t.alert.message="تم تعديل القسم!",t.close(),t.errors=[],t.newCategory={id:null,title_ar:null,title_en:null,category:{id:null,title:null},rel_category:{id:null,title:null}},t.$refs.image_input.value=""}).catch(function(e){var a=e.response;t.errors=a.data.errors}):this.$http.post("api/admin/categories/add/category?page="+this.page,a).then(function(e){t.getDataFromApi(e).then(function(e){t.requests=e.items,t.totalRequests=e.total}),t.alert.type="info",t.alert.message="تم اضافة القسم!",t.close(),t.errors=[],t.newCategory={id:null,title_ar:null,title_en:null,category:{id:null,title:null},rel_category:{id:null,title:null}},t.$refs.image_input.value=""}).catch(function(e){var a=e.response;t.errors=a.data.errors})},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=s()(e,3),i=a[0],n=a[1];return a[2]+"-"+i.padStart(2,"0")+"-"+n.padStart(2,"0")}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-2"},[a("vuetify-alert",{attrs:{message:t.alert.message},on:{message:function(e){t.alert.message=""}}}),t._v(" "),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",{},[a("v-icon",{attrs:{medium:""}},[t._v(t._s(t.icon))]),t._v("\n      "+t._s(t.title)+"\n    ")],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-checkbox",{staticClass:"mt-4",attrs:{label:"متميز"},model:{value:t.specialEvent,callback:function(e){t.specialEvent=e},expression:"specialEvent"}}),t._v(" "),a("v-text-field",{staticStyle:{"max-width":"200px",height:"42px","font-size":"11px"},attrs:{"append-icon":"search",label:"بحث","single-line":"","hide-details":""},nativeOn:{keyup:function(e){t.makeSearch(e)}}}),t._v(" "),a("v-select",{staticStyle:{"max-width":"200px",height:"42px","font-size":"11px"},attrs:{flat:"",dense:"",items:[{title_ar:"الدول",id:null}].concat(t.countries),"item-text":"title_ar","item-value":"id"},model:{value:t.filterCountry,callback:function(e){t.filterCountry=e},expression:"filterCountry"}}),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.special_event_dialog,callback:function(e){t.special_event_dialog=e},expression:"special_event_dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("تمييز حدث")])]),t._v(" "),a("v-card-text",[a("ul",t._l(t.errors,function(e){return a("li",{key:e[0]+Math.random(),staticClass:"red--text"},[a("ul",t._l(e,function(e){return a("li",{key:e+Math.random()},[t._v(t._s(e))])}))])}))]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",[a("v-checkbox",{staticClass:"mx-2",attrs:{label:"تمييز الحدث"},model:{value:t.event.special,callback:function(e){t.$set(t.event,"special",e)},expression:"event.special"}}),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.event.special,expression:"event.special"}],attrs:{justify:"center"}},[a("label",[t._v("من تاريخ")]),t._v(" "),a("br"),t._v(" "),a("v-date-picker",{model:{value:t.event.from,callback:function(e){t.$set(t.event,"from",e)},expression:"event.from"}})],1),t._v(" "),a("br"),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.event.special,expression:"event.special"}],attrs:{justify:"center"}},[a("label",[t._v("الى تاريخ")]),t._v(" "),a("br"),t._v(" "),a("v-date-picker",{model:{value:t.event.to,callback:function(e){t.$set(t.event,"to",e)},expression:"event.to"}})],1),t._v(" "),a("br")],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("الغاء")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.addEditSpecail(e)}}},[t._v("حفظ")])],1)],1)],1)],1),t._v(" "),a("v-data-table",{attrs:{headers:t.headers,items:t.requests,"total-items":t.totalRequests,loading:t.loading,search:t.search,"hide-actions":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[e.item.title?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.title))]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد مسمى")]),t._v(" "),a("td",{staticClass:"text-xs-right"},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:"https://afr7na.com/public"+e.item.special_image,alt:"ايقونة ",title:"صورة ",width:"50px",height:"50px"}})]),t._v(" "),e.item.user_id?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.user.name))]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد مسمى")]),t._v(" "),e.item.phone?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.phone))]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد مسمى")]),t._v(" "),e.item.country.title_ar?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.country.title_ar))]):t._e(),t._v(" "),e.item.region.title_ar?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.region.title_ar))]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد مسمى")]),t._v(" "),e.item.invitation_start_time?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.invitation_start_time))]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد وقت محدد")]),t._v(" "),e.item.special?a("td",{staticClass:"text-xs-right"},[t._v("اعلان مميز")]):a("td",{staticClass:"text-xs-right"},[t._v("اعلان غير مميز")]),t._v(" "),e.item.from?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.from))]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد تاريخ")]),t._v(" "),e.item.to?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.to))]):a("td",{staticClass:"text-xs-right"},[t._v("لا يوجد تاريخ")]),t._v(" "),a("td",{staticClass:"text-xs-right"},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",flat:"",color:"red"},on:{click:function(a){t.event_special(e.item)}},slot:"activator"},[e.item.special?a("v-icon",{staticClass:"mr-2 blue--text"},[t._v("check")]):a("v-icon",{staticClass:"mr-2 blue--text"},[t._v("stop")])],1),t._v(" "),a("span",[t._v("التمييز /الغاء التمييز")])],1)],1),t._v(" "),a("td",{staticClass:"justify-right layout px-0"},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",small:"",flat:"",color:"blue"},on:{click:function(a){t.prepareSendingNoti(e.item)}},slot:"activator"},[a("v-icon",{staticClass:"mr-2 blue--text"},[t._v("add_alert")])],1),t._v(" "),a("span",[t._v("ارسال الإشعارات")])],1),t._v(" "),null==e.item.deleted_at?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",loading:t.disapprove,icon:"",small:"",flat:"",color:"red"},on:{click:function(a){t.selectedItem=e.item,t.askToDeleteDialog=!t.askToDeleteDialog}},slot:"activator"},[a("v-icon",{staticClass:"red--text"},[t._v("delete")])],1),t._v(" "),a("span",[t._v("تعطيل")])],1):a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",loading:t.approve,icon:"",small:"",flat:"",color:"green"},on:{click:function(a){t.restoreItem(e.item)}},slot:"activator"},[a("v-icon",{staticClass:"green--text"},[t._v("restore")])],1),t._v(" "),a("span",[t._v("تنشيط")])],1)],1)]}},{key:"pageText",fn:function(e){return[t._v("الصفحات "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" من "+t._s(e.itemsLength))]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('لا يوجد نتائج للبحث "'+t._s(t.search)+'"')]),t._v(" "),a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:!0,color:"success",icon:"warning",outline:""}},[t._v("لا يوجد دعوات")])],1)],2),t._v(" "),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{"total-visible":"6",color:"primary",length:t.pages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.askToDeleteDialog,callback:function(e){t.askToDeleteDialog=e},expression:"askToDeleteDialog"}},[a("v-card",[a("v-card-title",{staticClass:"title red--text"},[t._v("متأكد من إيقاف الدعوة")]),t._v(" "),a("v-card-text",[a("v-checkbox",{attrs:{color:"red",label:"حذف الدعوة نهائيا"},model:{value:t.forceDelete,callback:function(e){t.forceDelete=e},expression:"forceDelete"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"grey darken-1",flat:"flat"},on:{click:function(e){t.askToDeleteDialog=!1}}},[t._v("لا")]),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",flat:"flat"},on:{click:t.deleteItem}},[t._v("نعم")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.notiControl.sendNotiDialog,callback:function(e){t.$set(t.notiControl,"sendNotiDialog",e)},expression:"notiControl.sendNotiDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("ارسال الإشعارات")])]),t._v(" "),a("v-card-text",[a("v-list",[t._l(t.errors,function(e){return[a("v-list-tile",{key:e[0]+Math.random()},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"text-xs-center"},t._l(e,function(e){return a("span",{key:e+Math.random(),staticClass:"red--text"},[t._v("\n                    "+t._s(e)+"\n                    "),a("v-icon",{attrs:{color:"red"}},[t._v("error")])],1)}))],1)],1)]})],2)],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs8:""}},[a("v-select",{attrs:{flat:"",dense:"",items:[].concat(t.notiControl.countries),"item-text":"title_ar","item-value":"id",label:"الدولة"},on:{change:function(e){t.selectedCountryChanged(e)}},model:{value:t.notiControl.selectedCountry,callback:function(e){t.$set(t.notiControl,"selectedCountry",e)},expression:"notiControl.selectedCountry"}})],1),t._v(" "),a("v-flex",{attrs:{xs4:""}},[a("v-checkbox",{staticClass:"mt-4",attrs:{color:"primary",label:"كل مناطق الدولة"},on:{change:function(e){t.allcountryChanged(e)}},model:{value:t.notiControl.allCountry,callback:function(e){t.$set(t.notiControl,"allCountry",e)},expression:"notiControl.allCountry"}})],1),t._v(" "),t.notiControl.showRegionSelectBox?a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:[{title_ar:"المناطق",id:null}].concat(t.notiControl.regions),"item-text":"title_ar","item-value":"id",label:"المناطق"},model:{value:t.notiControl.selectedRegion,callback:function(e){t.$set(t.notiControl,"selectedRegion",e)},expression:"notiControl.selectedRegion"}})],1):t._e()],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"ma-2",attrs:{color:"",small:""},nativeOn:{click:function(e){t.notiControl.sendNotiDialog=!1,t.close}}},[t._v("الغاء")]),t._v(" "),a("v-btn",{staticClass:"ma-2",attrs:{color:"primary",laoding:t.notiControl.loading,dark:"",small:""},nativeOn:{click:function(e){t.sendNotifications(t.notiControl)}}},[t._v("حفظ")])],1)],1)],1)],1)},staticRenderFns:[]};var h={data:function(){return{categories:[],model:"tab-1"}},components:{WeddingsTable:v,OccasionsTable:g,InvetationsTable:a("VU/8")(p,_,!1,function(t){a("27a7")},"data-v-5a80ac40",null).exports},created:function(){this.getMainCategories()},methods:{getMainCategories:function(){var t=this;t.$http.get("admin/main_category").then(function(e){t.categories=e.data}).catch(function(t){})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-tabs",{staticStyle:{position:"absolute",width:"100%",top:"0px",left:"0",right:"0"},attrs:{grow:"",dark:"","icons-and-text":"","fixed-tabs":""},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[a("v-tabs-slider",{attrs:{color:"red darken-2"}}),t._v(" "),t._l(t.categories,function(e,i){return a("v-tab",{key:i,staticClass:"tab",attrs:{light:"",href:"#tab-"+e.id}},[t._v("\n      "+t._s(e.title_ar)+"\n      "),a("v-icon",[t._v("subject")])],1)}),t._v(" "),a("v-tabs-items",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.categories,function(e,i){return a("v-tab-item",{key:i,attrs:{value:"tab-"+e.id}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",{attrs:{row:""}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{md10:""}},[1==e.id?a("weddings-table",{attrs:{cat_id:e.id,title:e.title_ar,icon:"link"}}):2==e.id?a("occasions-table",{attrs:{cat_id:e.id,title:e.title_ar,icon:"link"}}):3==e.id?a("invetations-table",{attrs:{cat_id:e.id,title:e.title_ar,icon:"link"}}):t._e()],1)],1)],1)],1)],1)}))],2)],1)},staticRenderFns:[]};var f=a("VU/8")(h,m,!1,function(t){a("dfnm")},null,null);e.default=f.exports},dfnm:function(t,e){},jxFa:function(t,e){}});