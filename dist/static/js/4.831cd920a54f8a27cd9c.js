webpackJsonp([4],{HiOd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("d7EF"),s=i.n(a),n=i("woOf"),l=i.n(n),r=i("//Fk"),o=i.n(r),c={props:{title:{default:"",type:String},icon:{default:"",type:String}},data:function(){return{flagTypes:[{id:1,name:"عند فتح التطبيق"},{id:2,name:"عند فتح الاعلانات"},{id:3,name:"عند فتح الاقسام"},{id:4,name:"بعد ثلاثة نقرات داخل التطبيق"}],linkPrifix:"",http:"http://",isHttps:!1,selected:[],selectedItem:null,dialog:!1,addEditDialog:!1,edit:!1,deleting:!1,CountProductDialog:!1,dateFormatted:null,date:null,picker:null,landscape:!1,paginationDialog:!1,end_date:null,optionsDialog:!1,requests:[],productNumbers:10,media:[],totalRequests:0,pagination:{},errors:[],search:"",loading:!1,specializing:!1,approve:!1,disapprove:!1,Countries:[],ad:{id:null,title_ar:null,title_en:null,link:null,image:"",flag:1,country_id:0},headers:[{text:"الاسم بالعربية",align:"center",value:"country",sortable:!1},{text:"الاسم بالانجليزية",align:"center",value:"country",sortable:!1},{text:"اسم البلد",align:"center",value:"country",sortable:!1},{text:"الرابط",align:"center",value:"link",sortable:!1},{text:"صوره",align:"center",value:"image",sortable:!1},{text:"علامة",align:"center",value:"flag",sortable:!1},{text:"عدد المشاهدات",align:"center",value:"views",sortable:!1},{text:"عمليات",align:"center",value:"actions",sortable:!1}],alert:{message:"",type:"success"},page:1,filterCategory:null,categories:[],searchCategories:[],addEditCategories:[],index:null,filter:null}},computed:{formTitle:function(){return this.edit?"تعديل اعلان":"إضافة اعلان"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},watch:{filterAdsType:function(t){var e=this;this.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total})},isHttps:function(t){this.http=1==t?"https://":"http://"},addEditDialog:function(t){t||(this.ad={id:null,title_ar:null,title_en:null,link:null,image:""}),t||this.close()},dialog:function(t){t||this.close()},page:function(t){this.pagination.page=t,this.fetch()},filterCategory:function(t){var e=this;this.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total})},filter:function(t){var e=this;this.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total})},optionsDialog:function(t){0==t&&(this.selectedItem=null,this.date=null,this.end_date=null,this.discrimint[0].value=!1)}},created:function(){var t=this;this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})},mounted:function(){this.fetchCountries()},methods:{fetchCountries:function(){var t=this;this.$http.get("admin/country").then(function(e){t.Countries=e.data.data})},formatDateWithZone:function(t,e){var i,a=(new Date).getTimezoneOffset().toString(),s=a.slice(0,1),n=parseInt(a.replace(s,"")),l=t.split(" "),r=l[1].split(":"),o=l[0].split("-");return(i=new Date(o[0],parseInt(o[1],10)-1,o[2],r[0],r[1])).getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes(),"from"==e?i.setMinutes("-"==s?i.getMinutes()-n:i.getMinutes()+n):"to"==e&&i.setMinutes("-"==s?i.getMinutes()+n:i.getMinutes()-n),i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()},fetch:function(){var t=this;this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),this.loading},getDataFromApi:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loading=!0,new o.a(function(i,a){var s=t.pagination,n=(s.sortBy,s.descending,s.page);s.rowsPerPage;if(null!=e){var l=e.data.data,r=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,setTimeout(function(){t.loading=!1},300),i({items:l,total:r})}else{var o=null!=t.filter?"admin/flash-ads?country_id="+t.filter+"&page="+n:"admin/flash-ads?page="+n;t.$http.get(o).then(function(e){var a=e.data.data,s=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,setTimeout(function(){t.loading=!1},300),i({items:a,total:s})})}})},selectImage:function(){document.getElementById("image_choose").click()},imageChanged:function(){var t=this;if($("#image_choose")[0].files&&$("#image_choose")[0].files[0]){var e=new FileReader;e.addEventListener("load",function(e){$("#avatar").attr("src",e.target.result),t.editedItem.image=e.target.result}),e.readAsDataURL($("#image_choose")[0].files[0])}},editItem:function(t){this.editedIndex=this.requests.indexOf(t),this.editedItem=l()({},t),this.dialog=!0},deleteItem:function(t){var e=this;this.deleting=!0;var i=this.requests.indexOf(t);confirm("هل تريد مسح الاعلان؟")?this.$http.delete("admin/flash-ads/"+t.id).then(function(t){e.requests.splice(i,1),e.alert.message="تم مسح الاعلان!",e.alert.type="success",e.deleting=!1}):this.deleting=!1},close:function(){var t=this;this.dialog=!1,null!=this.index&&(this.requests[this.index].link=this.linkPrifix),setTimeout(function(){t.editedItem=l()({},t.defaultItem),t.editedIndex=-1},300)},closeAddEditDialog:function(){this.addEditDialog=!1,this.ad={id:null,title_ar:null,title_en:null,ads_category_id:null},null!=this.index&&(this.requests[this.index].link=this.linkPrifix)},inc_views:function(t){var e=this;this.$http.put("admin/flash-ads/"+t.id+"/add_views").then(function(t){e.getDataFromApi().then(function(t){e.requests=t.items,e.totalRequests=t.total}),e.alert.message="تم زيادة نسبه مشاهدةالاعلان",e.alert.type="success",e.deleting=!1})},editing:function(t){this.errors=[],this.addEditDialog=!this.addEditDialog,this.edit=!0,this.ad.id=t.id,this.ad.title_ar=t.title_ar,this.ad.title_en=t.title_en,this.ad.flag=t.flag,this.ad.country_id=t.country_id,t.link.search("http://")>-1?(t.link=t.link.replace("http://",""),this.http="http://",this.linkPrifix=""+this.http+t.link,this.isHttps=!1,this.ad.link=t.link):t.link.search("https://")>-1?(t.link=t.link.replace("https://",""),this.http="https://",this.linkPrifix=""+this.http+t.link,this.isHttps=!0,this.ad.link=t.link):(this.http="http://",this.linkPrifix=""+t.link,this.isHttps=!1,this.ad.link=t.link),this.index=this.requests.indexOf(t)},save:function(){var t=this,e=(this.index,this.$refs.image_input.files[0]);void 0===e&&(e=null);var i=new FormData;e&&i.append("image",e),this.ad.title_ar&&i.append("title_ar",this.ad.title_ar),this.ad.title_en&&i.append("title_en",this.ad.title_en),this.ad.link&&(this.ad.link=""+this.http+this.ad.link),i.append("link",this.ad.link),this.ad.flag&&i.append("flag",this.ad.flag),this.ad.country_id&&i.append("country_id",this.ad.country_id);var a=this.edit?"admin/flash-ads/"+this.ad.id:"admin/flash-ads";this.$http.post(a,i).then(function(e){t.alert.type="warning",t.alert.message=t.edit?"تم تعديل الإعلان":"تم حفظ الإعلان",t.close(),t.errors=[],t.ad={id:null,title_ar:null,title_en:null,link:null},t.http="http://",t.isHttps="false",t.$refs.image_input.value="",setTimeout(function(){t.addEditDialog=!1,t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})},300),t.edit=!1}).catch(function(e){var i=e.response;t.errors=i.data.error,setTimeout(function(){t.ad={id:t.ad.id,title_ar:t.ad.title_ar,title_en:t.ad.title_en,link:t.ad.link.replace(t.http,"")}},200)})},parseDate:function(t){if(!t)return null;var e=t.split("/"),i=s()(e,3),a=i[0],n=i[1];return i[2]+"-"+a.padStart(2,"0")+"-"+n.padStart(2,"0")}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("vuetify-alert",{attrs:{message:t.alert.message,type:t.alert.type},on:{message:function(e){t.alert.message=""}}}),t._v(" "),i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",{},[i("v-icon",{attrs:{medium:""}},[t._v(t._s(t.icon))]),t._v("\n      "+t._s(t.title)+"\n    ")],1),t._v(" "),i("v-spacer"),t._v(" "),i("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.addEditDialog,callback:function(e){t.addEditDialog=e},expression:"addEditDialog"}},[i("v-tooltip",{attrs:{slot:"activator",top:""},slot:"activator"},[i("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",fab:"",dark:"",small:""},on:{click:function(e){t.edit=!1,t.errors=[],t.errors=[],t.ad={},t.isHttps=!1,t.http="http://"}},slot:"activator"},[i("v-icon",[t._v("add")])],1),t._v(" "),i("span",[t._v("إضافة إعلان جديد")])],1),t._v(" "),i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),i("v-card-text",[i("v-list",[t._l(t.errors,function(e){return[i("v-list-tile",{key:e[0]+Math.random()},[i("v-list-tile-content",[i("v-list-tile-title",{staticClass:"text-xs-center"},t._l(e,function(e){return i("span",{key:e+Math.random(),staticClass:"red--text"},[t._v("\n                      "+t._s(e)+"\n                      "),i("v-icon",{attrs:{color:"red"}},[t._v("error")])],1)}))],1)],1)]})],2)],1),t._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",[i("v-text-field",{attrs:{label:" اسم الإعلان بالعربية"},model:{value:t.ad.title_ar,callback:function(e){t.$set(t.ad,"title_ar",e)},expression:"ad.title_ar"}}),t._v(" "),i("v-text-field",{attrs:{label:"اسم الإعلان بالانجليزية"},model:{value:t.ad.title_en,callback:function(e){t.$set(t.ad,"title_en",e)},expression:"ad.title_en"}}),t._v(" "),i("v-select",{staticStyle:{height:"42px","font-size":"11px"},attrs:{flat:"",dense:"",items:[{title_ar:"الدول",id:null}].concat(t.Countries),"item-text":"title_ar","item-value":"id",label:"الدول"},model:{value:t.ad.country_id,callback:function(e){t.$set(t.ad,"country_id",e)},expression:"ad.country_id"}}),t._v(" "),i("br"),t._v(" "),i("v-text-field",{staticClass:"link",staticStyle:{"text-align":"left !important"},attrs:{prefix:t.http,label:" رابط الإعلان"},model:{value:t.ad.link,callback:function(e){t.$set(t.ad,"link",e)},expression:"ad.link"}}),t._v(" "),i("v-switch",{attrs:{label:"https",color:"primary"},model:{value:t.isHttps,callback:function(e){t.isHttps=e},expression:"isHttps"}}),t._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.$refs.image_input.click()}}},[i("v-icon",[t._v("image")]),t._v("صورة\n                ")],1),t._v(" "),i("input",{ref:"image_input",staticStyle:{display:"none"},attrs:{type:"file"}}),t._v(" "),i("v-radio-group",{model:{value:t.ad.flag,callback:function(e){t.$set(t.ad,"flag",e)},expression:"ad.flag"}},t._l(t.flagTypes,function(t,e){return i("v-radio",{key:e,attrs:{label:""+t.name,value:t.id}})}))],1)],1)],1)],1),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{staticClass:"ma-2",attrs:{color:"",small:""},nativeOn:{click:function(e){return t.closeAddEditDialog(e)}}},[t._v("الغاء")]),t._v(" "),i("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:"",small:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("حفظ")])],1)],1)],1),t._v(" "),i("v-select",{staticStyle:{height:"42px","font-size":"11px"},attrs:{flat:"",dense:"",items:[{title_ar:"الدول",id:null}].concat(t.Countries),"item-text":"title_ar","item-value":"id",label:"الدول"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),t._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.requests,"total-items":t.totalRequests,loading:t.loading,"item-key":"product_id",search:t.search,"hide-actions":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return t.requests?[e.item.title_ar?i("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.title_ar))]):i("td",{staticClass:"text-xs-center"},[t._v("لا يوجد اسم")]),t._v(" "),e.item.title_en?i("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.title_en))]):i("td",{staticClass:"text-xs-center"},[t._v("لا يوجد اسم")]),t._v(" "),e.item.country.title_ar?i("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.country.title_ar))]):i("td",{staticClass:"text-xs-center"},[t._v("لا يوجد اسم")]),t._v(" "),e.item.link?i("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.link))]):i("td",{staticClass:"text-xs-center"},[t._v("لا يوجد رابط")]),t._v(" "),i("td",{staticClass:"text-xs-center"},[i("img",{staticStyle:{cursor:"pointer"},attrs:{src:"https://afr7na.com/public"+e.item.image,alt:"صورة الاعلان",title:"صورة الاعلان",width:"50px",height:"50px"},on:{click:function(){t.media=e.item.media.concat([{image:e.item.spec_image}]),t.dialog=!0}}})]),t._v(" "),1===e.item.flag?i("td",{staticClass:"text-xs-center"},[t._v("عند فتح التطبيق")]):2===e.item.flag?i("td",{staticClass:"text-xs-center"},[t._v("عند فتح الاعلانات")]):3===e.item.flag?i("td",{staticClass:"text-xs-center"},[t._v("عند فتح الاقسام")]):4===e.item.flag?i("td",{staticClass:"text-xs-center"},[t._v("عند النقر ثلاث مرات داخل التطبيق")]):t._e(),t._v(" "),e.item.view?i("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.view))]):i("td",{staticClass:"text-xs-center"},[t._v("0")]),t._v(" "),i("td",{staticClass:"justify-center layout px-0"},[i("v-tooltip",{attrs:{top:""}},[i("v-btn",{attrs:{slot:"activator",icon:"",flat:"",color:"red"},on:{click:function(i){t.inc_views(e.item)}},slot:"activator"},[i("v-icon",{staticClass:"mr-2 green--text"},[t._v("add")])],1)],1),t._v(" "),i("v-tooltip",{attrs:{top:""}},[i("v-btn",{attrs:{slot:"activator",icon:"",loading:t.approve,flat:"",color:"blue"},on:{click:function(i){t.editing(e.item)}},slot:"activator"},[i("v-icon",{staticClass:"mr-2 blue--text"},[t._v("edit")])],1)],1),t._v(" "),i("v-tooltip",{attrs:{top:""}},[i("v-btn",{attrs:{slot:"activator",icon:"",flat:"",color:"red"},on:{click:function(i){t.deleteItem(e.item)}},slot:"activator"},[i("v-icon",{staticClass:"red--text"},[t._v("delete")])],1)],1)],1)]:void 0}},{key:"pageText",fn:function(e){return[t._v("الصفحات "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" من "+t._s(e.itemsLength))]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[i("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('لا يوجد نتائج للبحث "'+t._s(t.search)+'"')]),t._v(" "),i("template",{slot:"no-data"},[i("v-alert",{attrs:{value:!0,color:"success",icon:"warning",outline:""}},[t._v("لا يوجد اعلانات")])],1)],2),t._v(" "),i("div",{staticClass:"text-xs-center pt-2"},[i("v-pagination",{attrs:{"total-visible":"6",color:"primary",length:t.pages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),t.media.length?i("v-dialog",{staticStyle:{"max-height":"400px"},attrs:{width:"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-carousel",{attrs:{circle:!1,interval:"600000"}},t._l(t.media,function(e){return i("v-carousel-item",{key:e.id,attrs:{color:"primary"}},[e.image?i("img",{staticStyle:{margin:"0 auto",width:"100%",height:"100%"},attrs:{src:"https://afr7na.com/publicitem.image",alt:"",srcset:""}}):t._e(),t._v(" "),e.vedio?i("img",{staticStyle:{margin:"0 auto",width:"100%",height:"100%"},attrs:{src:t.$root.$data.baseURL+e.vedio,alt:"",srcset:""}}):t._e(),t._v(" "),i("video",{attrs:{width:"600",height:"80%",controls:""}},[i("source",{attrs:{src:t.$root.$data.baseURL+e.vedio,type:"video/mp4"}}),t._v(" "),i("source",{attrs:{src:t.$root.$data.baseURL+e.vedio,type:"video/ogg"}}),t._v("Your browser does not support the video tag.\n          ")])])}))],1)],1):t._e()],1)},staticRenderFns:[]};var u={components:{FlashAdsTable:i("VU/8")(c,d,!1,function(t){i("JY2U")},"data-v-789ab4ac",null).exports}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",[e("flash-ads-table",{attrs:{title:"اعلانات الفلاش",icon:"devices_other"}})],1)},staticRenderFns:[]};var p=i("VU/8")(u,v,!1,function(t){i("Zw2p")},null,null);e.default=p.exports},JY2U:function(t,e){},Zw2p:function(t,e){}});