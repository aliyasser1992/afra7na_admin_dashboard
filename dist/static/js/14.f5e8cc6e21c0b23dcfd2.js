webpackJsonp([14],{"7H+z":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("cWme"),r={data:function(){return{banners:[],headers:[{text:"تاريخ الاضافة",value:"created_at",searchable:!0,sortable:!0},{text:"اسم المعلن",value:"advertiser_name",searchable:!0,sortable:!0},{text:"تصنيف المعلن",value:"advertiser_category",searchable:!0,sortable:!0},{text:"اسم الحدث",value:"event_title",searchable:!0,sortable:!0},{text:"المنطقة",value:"region",searchable:!0,sortable:!0},{text:"سعر الاعلان",value:"price",searchable:!0,sortable:!0},{text:"موقع الاعلان",value:"position",searchable:!0,sortable:!0},{text:"نوع الاعلان",value:"type",searchable:!0,sortable:!0},{text:"صورة الاعلان",value:"link",searchable:!0,sortable:!0},{text:"فيديو الاعلان",value:"link",searchable:!0,sortable:!0},{text:"تعديل",value:"id",searchable:!0,sortable:!0},{text:"حذف",value:"id",searchable:!0,sortable:!0}],pagination:{rowsPerPage:10,page:1,sortBy:"created_at",totalItems:0,descending:!0},total:1,types:{text:"نصي",image:"صورة",video:"فيديو"},search:null,searchTimeout:null}},mounted:function(){this.fetchBanners()},watch:{pagination:function(e){this.fetchBanners(e)},search:function(e){var t=this;this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){t.fetchBanners()},500)}},methods:{createRequestParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{search:this.search,sort:e.sortBy||this.pagination.sortBy,order:e.descending||this.pagination.descending?"desc":"asc",limit:e.rowsPerPage||this.pagination.rowsPerPage,page:e.page||this.pagination.page}},fetchBanners:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.createRequestParams(t);console.log(a),this.$http.get("admin/advertising/banners",{params:a}).then(function(t){var a=t.data;e.banners=a.data,e.total=a.total}).catch(function(e){console.log(e)})},generateImageLink:function(e){return n.a.replace("api","public/")+e},removeBanner:function(e){var t=this;this.$swal.fire({text:"هل انت متاكد من حذق هذا الاعلان",toast:!0,icon:"warning",showDenyButton:!0,denyButtonText:"لا",confirmButtonText:"نعم"}).then(function(a){a.isConfirmed&&t.$http.delete("admin/advertising/banners/"+e).then(function(){t.fetchBanners()}).catch(function(){t.$swal.fire({text:"خطأ اثناء حذف الاعلان",icon:"error",toast:!0})})})}},components:{VideoBanner:a("+XN8").default}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-toolbar",[a("v-toolbar-title",[a("v-icon",[e._v("tv")]),e._v(" الاعلانات")],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{to:"/banners/add",color:"primary"}},[a("v-icon",[e._v("add")]),e._v("\n      اضافة اعلان\n    ")],1)],1),e._v(" "),a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{type:"search",placeholder:"بحث"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("v-icon",[e._v("search")])],1),e._v(" "),a("v-data-table",{attrs:{headers:e.headers,items:e.banners,pagination:e.pagination,"total-items":e.total,search:e.search},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(new Date(t.item.created_at).toLocaleString("ar-kw")))]),e._v(" "),a("td",[e._v(e._s(t.item.advertiser_name))]),e._v(" "),a("td",[e._v(e._s(t.item.advertiser_category))]),e._v(" "),a("td",[e._v(e._s(t.item.event_title))]),e._v(" "),a("td",[e._v(e._s(t.item.region))]),e._v(" "),a("td",[e._v(e._s(t.item.price||"مجاني"))]),e._v(" "),a("td",[e._v(e._s(t.item.position))]),e._v(" "),a("td",[e._v(e._s(e.types[t.item.type]))]),e._v(" "),a("td",[t.item.link?a("v-img",{attrs:{src:e.generateImageLink(t.item.link)}}):a("p",[e._v("لا يوجد")])],1),e._v(" "),a("td",["video"===t.item.type?a("v-btn",{attrs:{href:t.item.external_link,target:"blank",color:"info"}},[e._v("مشاهدة")]):a("p",[e._v("لا يوجد")])],1),e._v(" "),a("td",[a("v-btn",{attrs:{to:"/banners/"+t.item.id+"/edit",color:"yellow black--text",circle:"",icon:!0}},[a("v-icon",[e._v("edit")])],1)],1),e._v(" "),a("td",[a("v-btn",{attrs:{color:"red white--text",circle:"",icon:!0},on:{click:function(a){e.removeBanner(t.item.id)}}},[a("v-icon",[e._v("delete")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(r,i,!1,function(e){a("lz99")},null,null);t.default=s.exports},lz99:function(e,t){}});