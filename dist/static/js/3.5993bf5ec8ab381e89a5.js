webpackJsonp([3],{"18ub":function(t,e){},WELk:function(t,e){},lyxi:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("d7EF"),n=a.n(i),r=a("//Fk"),s=a.n(r),l={props:{title:{default:"",type:String},icon:{default:"",type:String}},data:function(){return{errors:[],country:{id:null,title_ar:null,title_en:null,currency:"",code:""},edit:!1,dialog:!1,deleteDialog:!1,forceDelete:!1,selectedItem:null,requests:[],totalRequests:0,pagination:{},search:"",loading:!1,disapprove:!1,approve:!1,headers:[{text:"الاسم عربى",align:"right",value:"userName",sortable:!1},{text:"الاسم انجليزى",align:"right",value:"userName",sortable:!1},{text:"الصورة",align:"right",value:"category",sortable:!1},{text:"كود الدولة",align:"right",value:"category",sortable:!1},{text:"العملة بالعربية",align:"right",value:"category",sortable:!1},{text:"العملة بالانجليزية",align:"right",value:"category",sortable:!1},{text:"عمليات",align:"cneter",value:"actions",sortable:!1}],editedItem:null,alert:{message:"",type:"success"},page:1,index:null,filterCategory:null,categories:[]}},computed:{formTitle:function(){return this.edit?"تعديل الدولة":"إضافة دولة"},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},watch:{dialog:function(t){t||(this.country={id:null,title_ar:null,title_en:null,code:null}),t||this.close()},page:function(t){this.pagination.page=t,this.fetch()}},created:function(){var t=this;this.loading||this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})},methods:{fetch:function(){var t=this;this.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total}),this.loading},getDataFromApi:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loading=!0,new s.a(function(a,i){var n=t.pagination,r=(n.sortBy,n.descending,n.page);n.rowsPerPage;if(null!=e){var s=e.data.data,l=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,t.loading=!1,a({items:s,total:l})}else{var o="admin/country?page="+r;t.$http.get(o).then(function(e){var i=e.data.data,n=e.data.total;t.pagination.rowsPerPage=e.data.per_page,t.pagination.totalItems=e.data.total,t.loading=!1,a({items:i,total:n})})}})},deleteItem:function(t){var e=this;this.deleting=!0;var a=this.requests.indexOf(t);confirm("هل تريد مسح الدولة؟")?this.$http.delete("admin/country/"+t.id).then(function(t){e.requests.splice(a,1),e.alert.message="تم مسح الدولة!",e.alert.type="success",e.deleting=!1}):this.deleting=!1},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=-1},300)},editing:function(t){this.errors=[],this.dialog=!this.dialog,this.edit=!0,this.country.id=t.id,this.country.title_ar=t.title_ar,this.country.title_en=t.title_en,this.country.code=t.code,this.country.currency_ar=t.currency_ar,this.country.currency_en=t.currency_en,this.index=this.requests.indexOf(t)},save:function(){var t=this,e=(this.index,this.$refs.image_input.files[0]);void 0===e&&(e=null);var a=new FormData,i={};e&&a.append("image",e),this.country.title_ar&&a.append("title_ar",this.country.title_ar),i.title_ar=this.country.title_ar,this.country.title_en&&a.append("title_en",this.country.title_en),i.title_en=this.country.title_en,this.country.code&&a.append("code",this.country.code),i.code=this.country.code,this.country.currency_ar&&a.append("currency_ar",this.country.currency_ar),i.currency_ar=this.country.currency_ar,this.country.currency_en&&a.append("currency_en",this.country.currency_en);var n=this.edit?"admin/country/"+this.country.id:'admin/country?page="'+this.page;this.$http.post(n,a).then(function(e){t.alert.type="info",t.alert.message=t.edit?"تم تعديل الدولة":"تم حفظ الدولة",t.close(),t.errors=[],t.country={id:null,title_ar:null,title_en:null,code:null},t.$refs.image_input.value="",t.getDataFromApi().then(function(e){t.requests=e.items,t.totalRequests=e.total})}).catch(function(e){var a=e.response;t.errors=a.data.error})},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=n()(e,3),i=a[0],r=a[1];return a[2]+"-"+i.padStart(2,"0")+"-"+r.padStart(2,"0")}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-2"},[a("vuetify-alert",{attrs:{message:t.alert.message},on:{message:function(e){t.alert.message=""}}}),t._v(" "),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",{},[a("v-icon",{attrs:{medium:""}},[t._v(t._s(t.icon))]),t._v(" "+t._s(t.title))],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-tooltip",{attrs:{slot:"activator",top:""},slot:"activator"},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",fab:"",dark:"",small:""},on:{click:function(e){t.edit=!1,t.errors=[]}},slot:"activator"},[a("v-icon",[t._v("add")])],1),t._v(" "),a("span",[t._v("إضافة دولة جديد")])],1),t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),a("v-card-text",[a("v-list",[t._l(t.errors,function(e){return[a("v-list-tile",{key:e[0]+Math.random()},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"text-xs-center"},t._l(e,function(e){return a("span",{key:e+Math.random(),staticClass:"red--text"},[t._v("\n                              "+t._s(e)+" "),a("v-icon",{attrs:{color:"red"}},[t._v("error")])],1)}))],1)],1)]})],2)],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",[a("v-text-field",{attrs:{label:" اسم الدولة بالعربية"},model:{value:t.country.title_ar,callback:function(e){t.$set(t.country,"title_ar",e)},expression:"country.title_ar"}}),t._v(" "),a("v-text-field",{attrs:{label:"اسم الدولة بالانجليزية"},model:{value:t.country.title_en,callback:function(e){t.$set(t.country,"title_en",e)},expression:"country.title_en"}}),t._v(" "),a("v-text-field",{attrs:{label:" عملة الدولة بالعربية"},model:{value:t.country.currency_ar,callback:function(e){t.$set(t.country,"currency_ar",e)},expression:"country.currency_ar"}}),t._v(" "),a("v-text-field",{attrs:{label:"عملة الدولة بالانجليزية"},model:{value:t.country.currency_en,callback:function(e){t.$set(t.country,"currency_en",e)},expression:"country.currency_en"}}),t._v(" "),a("v-text-field",{attrs:{label:"كود الدولة"},model:{value:t.country.code,callback:function(e){t.$set(t.country,"code",e)},expression:"country.code"}}),t._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.$refs.image_input.click()}}},[a("v-icon",[t._v("image")]),t._v("\n                                صورة\n                              ")],1),t._v(" "),a("input",{ref:"image_input",staticStyle:{display:"none"},attrs:{type:"file"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"ma-2",attrs:{color:"",small:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("الغاء")]),t._v(" "),a("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:"",small:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("حفظ")])],1)],1)],1)],1),t._v(" "),a("v-data-table",{attrs:{headers:t.headers,items:t.requests,"total-items":t.totalRequests,loading:t.loading,search:t.search,"hide-actions":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[e.item.title_ar?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.title_ar))]):a("td",{staticClass:"text-xs-right"},[t._v("لم يحدد")]),t._v(" "),e.item.title_en?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.title_en))]):a("td",{staticClass:"text-xs-right"},[t._v("لم يحدد")]),t._v(" "),a("td",{staticClass:"text-xs-right"},[a("img",{staticStyle:{cursor:"pointer"},attrs:{src:"https://afr7na.com/public"+e.item.image,alt:"ايقونة الدولة",title:"صورة الاعلان",width:"50px",height:"50px"},on:{click:function(a){t.openDialogue(e.item)}}})]),t._v(" "),e.item.code?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.code))]):a("td",{staticClass:"text-xs-right"},[t._v("لم يحدد")]),t._v(" "),e.item.currency_ar?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.currency_ar))]):a("td",{staticClass:"text-xs-right"},[t._v("لم يحدد")]),t._v(" "),e.item.currency_en?a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.currency_en))]):a("td",{staticClass:"text-xs-right"},[t._v("لم يحدد")]),t._v(" "),a("td",{staticClass:"justify-right layout px-0"},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",loading:t.approve,flat:"",color:"blue"},on:{click:function(a){t.editing(e.item)}},slot:"activator"},[a("v-icon",{staticClass:"mr-2 blue--text"},[t._v("\n                      edit\n                  ")])],1),t._v(" "),a("span",[t._v("تعديل الدولة")])],1),t._v(" "),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",loading:t.disapprove,flat:"",color:"red"},on:{click:function(a){t.deleteItem(e.item)}},slot:"activator"},[a("v-icon",{staticClass:"mr-2 red--text"},[t._v("\n                      delete\n                  ")])],1),t._v(" "),a("span",[t._v("مسح الدولة")])],1)],1)]}},{key:"pageText",fn:function(e){return[t._v("\n          الصفحات "+t._s(e.pageStart)+" - "+t._s(e.pageStop)+" من "+t._s(e.itemsLength)+"\n        ")]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('\n            لا يوجد نتائج للبحث "'+t._s(t.search)+'"\n        ')]),t._v(" "),a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:!0,color:"success",icon:"warning",outline:""}},[t._v("\n            لا يوجد دول\n          ")])],1)],2),t._v(" "),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{"total-visible":"6",color:"primary",length:t.pages},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[a("v-card",[a("v-card-title",{staticClass:"title red--text"},[t._v("هل تريد تعطيل الدولة؟")]),t._v(" "),a("v-card-text",[a("v-checkbox",{attrs:{color:"red",label:"حذف الدولة نهائيا"},model:{value:t.forceDelete,callback:function(e){t.forceDelete=e},expression:"forceDelete"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"grey darken-1",flat:"flat"},on:{click:function(e){t.dialog=!1}}},[t._v("\n            لا\n          ")]),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",flat:"flat"},on:{click:t.deleteItem}},[t._v("\n            نعم\n          ")])],1)],1)],1)],1)},staticRenderFns:[]};var c={components:{CountriesTable:a("VU/8")(l,o,!1,function(t){a("18ub")},"data-v-a182162c",null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",[e("countries-table",{attrs:{title:"الدول",icon:"language"}})],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("WELk")},null,null);e.default=d.exports}});